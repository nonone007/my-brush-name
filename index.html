<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø¬Ø±Ø¨ ÙˆÙƒØªÙ‘Ø¨ Ø§Ø³Ù…Ùƒ !</title>

  <!-- Inject <base href="/ØªØ¬Ø±Ø¨Ø©-Ø§Ù„Ø§Ø³Ù…/"> only when running under /ØªØ¬Ø±Ø¨Ø©-Ø§Ù„Ø§Ø³Ù… on fazavip.tn -->
  <script>
    (function () {
      try {
        var u = new URL(window.location.href);
        if (u.hostname.endsWith("fazavip.tn") && u.pathname.startsWith("/ØªØ¬Ø±Ø¨Ø©-Ø§Ù„Ø§Ø³Ù…")) {
          var base = document.createElement("base");
          base.setAttribute("href", "/ØªØ¬Ø±Ø¨Ø©-Ø§Ù„Ø§Ø³Ù…/");
          document.head.prepend(base);
        }
      } catch (_) {}
    })();
  </script>

  <!-- html2canvas for screenshots -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

  <style>
    /* ==== Fonts ==== */
    @font-face {
      font-family: 'Ar1';
      src: url('FONT.AR.1.ttf') format('truetype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Ar2';
      src: url('FONT.AR.2.ttf') format('truetype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Ar3';
      src: url('FONT.AR.3.otf') format('opentype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Fr1';
      src: url('FONT.FR.1.otf') format('opentype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Fr2';
      src: url('FONT.FR.2.ttf') format('truetype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Fr3';
      src: url('FONT.AR.3.otf') format('opentype');
      font-display: swap;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-image: url('BG.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù€ CSS ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ù† Ù†Ø³Ø®ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© */
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>

  <a href="https://fazaviptn.youcan.store/pages/brosses-a-cheveux" class="back-button">
    <span class="arrow">â†</span> Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ØªØ¬Ø±
  </a>

  <div class="main-container">
    <div class="brush-section">
      <div class="brush-container">
        <img src="BRUSH.NO.BG.png" alt="Decorative Brush" class="brush-image"/>
        <div class="text-overlay" id="textOverlay"></div>
      </div>
    </div>

    <div class="controls-panel">
      <h2 class="panel-title">! Ø¬Ø±Ø¨ ÙˆÙƒØªÙ‘Ø¨ Ø§Ø³Ù…Ùƒ</h2>

      <div class="input-group">
        <label for="nameInput" class="input-label">: Ø£ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ùˆ Ø§Ù„ÙØ±Ù†Ø³ÙŠ</label>
        <input type="text" id="nameInput" class="text-input" placeholder="Ø£ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." maxlength="15" autocomplete="off"/>
      </div>

      <div class="input-group">
        <label for="fontSelect" class="input-label">: Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ø®Ø·</label>
        <select id="fontSelect" class="font-select">
          <option value="" selected disabled hidden>-- Ø§Ø®ØªØ± Ù…Ù† Ù‡Ù†Ø§ --</option>
          <option value="Ar1">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 1</option>
          <option value="Ar2">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 2</option>
          <option value="Ar3">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 3</option>
          <option value="Fr1">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 1</option>
          <option value="Fr2">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 2</option>
          <option value="Fr3">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 3</option>
        </select>
      </div>

      <button id="confirmBtn" class="confirm-btn">Ø§Ø¶ØºØ· Ù‡Ù†Ø§</button>
      <div class="message-container">
        <div id="message" class="error-message"></div>
      </div>
      <div class="shortcuts-hint">ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø¶ØºØ· Enter Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…</div>
    </div>
  </div>

  <script>
    /* ==== JavaScript logic (Ù…Ù† Ù†Ø³Ø®ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ©ØŒ Ù„Ù… Ø£ØºÙŠØ± Ø´ÙŠØ¡ Ø¥Ù„Ø§ base Ø£Ø¹Ù„Ø§Ù‡) ==== */
    const nameInput = document.getElementById('nameInput');
    const fontSelect = document.getElementById('fontSelect');
    const confirmBtn = document.getElementById('confirmBtn');
    const textOverlay = document.getElementById('textOverlay');
    const message = document.getElementById('message');

    const arabicFonts = ['Ar1','Ar2','Ar3'];
    const mobileFontScale = { 'Ar1':1.6, 'Ar2':1.6, 'Ar3':1.6, 'Fr1':1, 'Fr2':1, 'Fr3':1 };

    function showMessage(text, type) {
      message.textContent = text;
      message.className = type;
      message.style.display = 'block';
    }
    function hideMessage(){ message.style.display='none'; }

    function adjustTextSize(text){
      textOverlay.classList.remove('long-text','very-long-text');
      if (text.length > 10) textOverlay.classList.add('very-long-text');
      else if (text.length > 6) textOverlay.classList.add('long-text');
    }

    function updateText(){
      const name = nameInput.value.trim();
      const selectedFont = fontSelect.value;

      if (name === '') { showMessage("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…",'error-message'); textOverlay.textContent=''; return; }
      if (name.length > 15) { showMessage("Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 15 Ø­Ø±ÙØ§Ù‹",'error-message'); textOverlay.textContent=''; return; }
      if (!selectedFont) { showMessage("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…Ø· Ø§Ù„Ø®Ø·",'error-message'); return; }

      const isMobile = window.matchMedia && (window.matchMedia('(max-width: 768px)').matches || window.matchMedia('(max-width: 480px)').matches);
      const scale = mobileFontScale[selectedFont] || 1;
      if (isMobile) textOverlay.style.setProperty('--mobile-scale', scale);
      else textOverlay.style.removeProperty('--mobile-scale');

      textOverlay.style.fontFamily = selectedFont;
      if (arabicFonts.includes(selectedFont)) textOverlay.classList.add('arabic-font');
      else textOverlay.classList.remove('arabic-font');

      textOverlay.textContent = name;
      adjustTextSize(name);
      showMessage("! ØªÙ…Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­",'success-message');
    }

    confirmBtn.addEventListener('click', updateText);
    nameInput.addEventListener('input', hideMessage);
    nameInput.addEventListener('keypress', e => { if (e.key === 'Enter') updateText(); });
    fontSelect.addEventListener('change', () => { if (textOverlay.textContent) updateText(); });

    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('fontSelect').selectedIndex = 0;
    });
  </script>
</body>
</html>
