<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no"
  />
  <title>Ø¬Ø±Ø¨ ÙˆÙƒØªÙ‘Ø¨ Ø§Ø³Ù…Ùƒ !</title>

  <!-- html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    /* =================== Fonts (Ù…Ø¹ ØªØµØ­ÙŠØ­ Fr3 + ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ­Ù…ÙŠÙ„) =================== */
    @font-face {
      font-family: 'Ar1';
      src: url('FONT.AR.1.ttf') format('truetype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Ar2';
      src: url('FONT.AR.2.ttf') format('truetype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Ar3';
      src: url('FONT.AR.3.otf') format('opentype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Fr1';
      src: url('FONT.FR.1.otf') format('opentype');
      font-display: swap;
    }
    @font-face {
      font-family: 'Fr2';
      src: url('FONT.FR.2.ttf') format('truetype');
      font-display: swap;
    }
    /* ÙƒØ§Ù† Fr3 ÙŠØ´ÙŠØ± Ù„Ù…Ù„Ù Ø¹Ø±Ø¨ÙŠ Ø¨Ø§Ù„ØºÙ„Ø· â€” Ù†Ø®Ù„ÙŠÙ‡ Ø¹Ù„Ù‰ Ù†ÙØ³ Ù…Ù„Ù Fr2 */
    @font-face {
      font-family: 'Fr3';
      src: url('FONT.FR.2.ttf') format('truetype');
      font-display: swap;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* ÙŠÙ…Ù†Ø¹ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…ÙØ§Ø¬Ø¦ Ø¹Ù„Ù‰ iOS */
    html { -webkit-text-size-adjust: 100%; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-image: url('BG.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      /* Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…Ø¹ background-attachment: fixedØ›Ù†Ø´ÙŠÙ„Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¨Ø£Ø³ÙÙ„ */
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-x: hidden;
    }

    .main-container {
      display: flex;
      max-width: 1400px;
      width: 100%;
      gap: 40px;
      align-items: flex-start;
      opacity: 0;
      animation: fadeIn 1s ease-out 0.5s forwards;
    }

    .brush-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø­Ø¬Ù… Ø«Ø§Ø¨Øª Ø¨ØµØ±ÙŠÙ‹Ø§ Ù„Ù„ÙØ±Ø´Ø§Ø© + Ù…Ù†Ø¹ â€œØ§Ù„Ù‚ÙØ²â€ Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
    .brush-container {
      position: relative;
      width: 100%;
      max-width: 1000px;
      margin-bottom: 30px;
      /* Ù†Ø«Ø¨Ù‘Øª Ù†Ø³Ø¨Ø© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ù„Ùˆ Ø­Ø¨ÙŠØª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ). Ù„Ùˆ ØµÙˆØ±ØªÙƒ Ø´ÙØ§ÙØ© Ø·ÙˆÙŠÙ„Ø©/Ø¹Ø±ÙŠØ¶Ø©ØŒ Ø¹Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©. */
      /* aspect-ratio: 5 / 3; */
      transition: transform 0.3s ease;
      will-change: transform;
      -webkit-tap-highlight-color: transparent;
    }

    .brush-image {
      width: 100%;
      height: auto;
      display: block;
      filter: drop-shadow(0 10px 30px rgba(0,0,0,.3));
      -webkit-user-drag: none;
      user-select: none;
      pointer-events: none;
    }

    .text-overlay {
      position: absolute;
      top: 48%;
      left: 35%;
      transform: translate(-50%, -50%);
      font-size: 50px;
      font-weight: bold;
      color: #1a1a1a;
      text-align: center;
      width: 70%;
      text-shadow: 2px 2px 4px rgba(255,255,255,.8);
      line-height: 1.2;
      transition: all 0.3s ease;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .text-overlay.arabic-font { font-size: 50px; }
    .text-overlay.long-text { font-size: 80px; }
    .text-overlay.very-long-text { font-size: 60px; }

    .controls-panel {
      background: rgba(255,255,255,.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,.1);
      border: 1px solid rgba(255,255,255,.2);
      width: 400px;
      position: sticky;
      top: 100px;
      margin-top: 50px;
      transition: all .3s ease;
    }

    .panel-title {
      font-size: 24px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 25px;
      text-align: center;
      position: relative;
    }
    .panel-title::after {
      content: '';
      position: absolute;
      bottom: -8px; left: 50%; transform: translateX(-50%);
      width: 60px; height: 3px;
      background: linear-gradient(90deg, #3498db, #9b59b6);
      border-radius: 2px;
    }

    .input-group { margin-bottom: 25px; position: relative; }
    .input-label { display:block; font-weight:600; color:#34495e; margin-bottom:8px; font-size:14px; }

    .text-input {
      width: 100%;
      padding: 15px 12px;
      border: 2px solid #e0e6ed;
      border-radius: 12px;
      font-size: 16px; /* 16px Ù„Ù…Ù†Ø¹ ØªÙƒØ¨ÙŠØ± iOS Ø¹Ù†Ø¯ Ø§Ù„ÙÙˆÙƒØ³ */
      transition: all .3s ease;
      background: rgba(255,255,255,.9);
      text-align: left;
      text-indent: 0;
    }
    .text-input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52,152,219,.1);
      transform: translateY(-2px);
    }
    .text-input::placeholder { color:#95a5a6; text-align:left; }

    .font-select {
      width: 100%;
      padding: 15px 18px;
      border: 2px solid #e0e6ed;
      border-radius: 12px;
      font-size: 16px;
      background: rgba(255,255,255,.9);
      cursor: pointer;
      transition: all .3s ease;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 16px;
      padding-right: 45px;
    }
    .font-select:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52,152,219,.1);
    }

    .confirm-btn {
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: #fff;
      border: none; border-radius: 12px;
      font-size: 16px; font-weight: 600;
      cursor: pointer;
      transition: all .3s ease;
      box-shadow: 0 4px 15px rgba(52,152,219,.3);
      position: relative; overflow: hidden;
    }
    .confirm-btn::before {
      content: '';
      position: absolute; top:0; left:-100%;
      width:100%; height:100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent);
      transition: left .5s;
    }
    .confirm-btn:hover::before { left: 100%; }
    .confirm-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(52,152,219,.4);
      background: linear-gradient(135deg, #2980b9, #1f5f8b);
    }
    .confirm-btn:active { transform: translateY(-1px); }

    .error-message {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: #fff;
      padding: 12px 20px;
      border-radius: 25px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(231,76,60,.3);
      animation: shake .6s ease-out;
      text-align: center;
      min-height: 20px;
    }
    .message-container { min-height: 60px; display:flex; align-items:center; justify-content:center; }

    .back-button {
      position: fixed; top: 30px; left: 30px;
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: #fff; border: none; border-radius: 50px;
      padding: 15px 25px; font-size: 16px; font-weight: 600;
      cursor: pointer; transition: all .3s ease;
      box-shadow: 0 4px 15px rgba(52,152,219,.3);
      text-decoration: none; display:flex; align-items:center; gap:10px;
      z-index: 1000;
    }
    .back-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(52,152,219,.4);
      background: linear-gradient(135deg, #2980b9, #1f5f8b);
    }
    .back-button:active { transform: translateY(-1px); }
    .back-button .arrow { font-size: 18px; transition: transform .3s ease; }
    .back-button:hover .arrow { transform: translateX(-3px); }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes shake {
      0%,100%{ transform: translateX(0); }
      10%,30%,50%,70%,90%{ transform: translateX(-5px); }
      20%,40%,60%,80%{ transform: translateX(5px); }
    }
    @keyframes float {
      0%,100% { transform: translateY(0) rotate(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    .particles {
      position: fixed; top:0; left:0; width:100%; height:100%;
      pointer-events:none; z-index:-1;
    }
    .particle {
      position:absolute; width:4px; height:4px; background: rgba(52,152,219,.3);
      border-radius:50%; animation: float 6s ease-in-out infinite;
    }

    /* =================== Responsive =================== */
    @media (max-width: 1200px) {
      .main-container { flex-direction: column; align-items: center; }
      .controls-panel { width: 100%; max-width: 500px; position: static; margin-top: 20px; }
    }
    @media (max-width: 768px) {
      body { padding: 15px; }
      .main-container { gap: 25px; }
      .brush-container { max-width: 600px; }
      .text-overlay {
        font-size: 38px; width: 80%; left: 35%; top: 48%;
        transform: translate(-50%, -50%) scale(var(--mobile-scale, 1));
      }
      .controls-panel { padding: 25px; }
      .panel-title { font-size: 20px; }
      /* Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙØŒ Ù„Ø§ Ù†Ø³ØªØ®Ø¯Ù… background-attachment: fixed */
      body { background-attachment: scroll; }
    }
    @media (max-width: 480px) {
      .brush-container { max-width: 450px; }
      .text-overlay {
        font-size: 30px; width: 85%; left: 35%; top: 48%;
        transform: translate(-50%, -50%) scale(var(--mobile-scale, 1));
      }
      .controls-panel { padding: 20px; }
    }

    /* ØªÙƒØ¨ÙŠØ± Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨ ÙÙ‚Ø· */
    @media (min-width: 1024px) {
      .text-overlay.arabic-font { font-size: 100px; }
      .text-overlay.arabic-font.long-text { font-size: 80px; }
      .text-overlay.arabic-font.very-long-text { font-size: 60px; }
    }

    /* Ù…Ù†Ø¹ ØªØ£Ø«ÙŠØ± hover ÙŠØ¹Ù„Ù‘Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    @media (hover:hover) and (pointer:fine) {
      .brush-container:hover { transform: scale(1.02); }
    }

    /* Arabic font handling */
    .text-overlay.arabic-font { font-size: clamp(32px, 10vw, 84px); }
    .text-overlay.arabic-font.long-text { font-size: clamp(28px, 8vw, 64px); }
    .text-overlay.arabic-font.very-long-text { font-size: clamp(24px, 7vw, 48px); }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>

  <a href="https://fazaviptn.youcan.store/pages/brosses-a-cheveux" class="back-button">
    <span class="arrow">â†</span> Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ØªØ¬Ø±
  </a>

  <div class="main-container">
    <div class="brush-section">
      <div class="brush-container">
        <img src="BRUSH.NO.BG.png" alt="Decorative Brush" class="brush-image" />
        <div class="text-overlay" id="textOverlay"></div>
      </div>
    </div>

    <div class="controls-panel">
      <h2 class="panel-title">! Ø¬Ø±Ø¨ ÙˆÙƒØªÙ‘Ø¨ Ø§Ø³Ù…Ùƒ</h2>

      <div class="input-group">
        <label for="nameInput" class="input-label">: Ø£ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ùˆ Ø§Ù„ÙØ±Ù†Ø³ÙŠ</label>
        <input type="text" id="nameInput" class="text-input" placeholder="Ø£ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." maxlength="15" autocomplete="off" />
      </div>

      <div class="input-group">
        <label for="fontSelect" class="input-label">: Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ø®Ø·</label>
        <select id="fontSelect" class="font-select">
          <option value="" selected disabled hidden>-- Ø§Ø®ØªØ± Ù…Ù† Ù‡Ù†Ø§ --</option>
          <option value="Ar1">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 1</option>
          <option value="Ar2">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 2</option>
          <option value="Ar3">Ø®Ø· Ø¹Ø±Ø¨ÙŠ 3</option>
          <option value="Fr1">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 1</option>
          <option value="Fr2">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 2</option>
          <option value="Fr3">Ø®Ø· ÙØ±Ù†Ø³ÙŠ 3</option>
        </select>
      </div>

      <script>
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø· Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('load', () => {
          document.getElementById('fontSelect').selectedIndex = 0;
        });
      </script>

      <button id="confirmBtn" class="confirm-btn">Ø§Ø¶ØºØ· Ù‡Ù†Ø§</button>

      <div class="message-container">
        <div id="message" class="error-message" style="display:none"></div>
      </div>

      <div class="shortcuts-hint" style="text-align:center;font-size:12px;color:#95a5a6;margin-top:15px;font-style:italic;">
        ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø¶ØºØ· Enter Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…
      </div>
    </div>
  </div>

  <script>
    const nameInput = document.getElementById('nameInput');
    const fontSelect = document.getElementById('fontSelect');
    const confirmBtn = document.getElementById('confirmBtn');
    const textOverlay = document.getElementById('textOverlay');
    const message = document.getElementById('message');

    const arabicFonts = ['Ar1', 'Ar2', 'Ar3'];
    const mobileFontScale = { Ar1: 1.6, Ar2: 1.6, Ar3: 1.6, Fr1: 1, Fr2: 1, Fr3: 1 };

    const errorMessages = {
      tooLong: 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 15 Ø­Ø±ÙØ§Ù‹',
      empty: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…',
      noFont: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…Ø· Ø§Ù„Ø®Ø·',
    };

    function showMessage(text) {
      message.textContent = text;
      message.style.display = 'block';
    }
    function hideMessage() { message.style.display = 'none'; }

    function adjustTextSize(text) {
      textOverlay.classList.remove('long-text', 'very-long-text');
      if (text.length > 10) textOverlay.classList.add('very-long-text');
      else if (text.length > 6) textOverlay.classList.add('long-text');
    }

    function updateText() {
      const name = nameInput.value.trim();
      const selectedFont = fontSelect.value;

      if (name === '') { showMessage(errorMessages.empty); textOverlay.textContent = ''; return; }
      if (name.length > 15) { showMessage(errorMessages.tooLong); textOverlay.textContent = ''; return; }
      if (!selectedFont) { showMessage(errorMessages.noFont); return; }

      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø·
      textOverlay.style.fontFamily = selectedFont;

      // Ù†Ù…Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
      if (arabicFonts.includes(selectedFont)) textOverlay.classList.add('arabic-font');
      else textOverlay.classList.remove('arabic-font');

      // Ø¶Ø¨Ø· Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ù„Ù†Øµ ÙÙ‚Ø· (Ù„Ø§ ÙŠØºÙŠÙ‘Ø± Ø­Ø¬Ù… Ø§Ù„ÙØ±Ø´Ø§Ø©)
      const isMobile = window.matchMedia && (window.matchMedia('(max-width: 768px)').matches || window.matchMedia('(max-width: 480px)').matches);
      const scale = mobileFontScale[selectedFont] || 1;
      if (isMobile) textOverlay.style.setProperty('--mobile-scale', scale);
      else textOverlay.style.removeProperty('--mobile-scale');

      textOverlay.textContent = name;
      adjustTextSize(name);

      // Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ø·ÙŠÙ
      textOverlay.classList.add('animate');
      setTimeout(() => textOverlay.classList.remove('animate'), 500);

      hideMessage();
    }

    confirmBtn.addEventListener('click', updateText);
    nameInput.addEventListener('input', hideMessage);
    nameInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') updateText(); });
    fontSelect.addEventListener('change', () => { if (textOverlay.textContent) updateText(); });

    // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¨Ø³ÙŠØ·Ø©
    nameInput.addEventListener('focus', function () { this.select(); this.setSelectionRange(0, 0); });

    // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª Ø§Ù„Ø®ÙÙŠÙØ© Ø¨Ø§Ù„Ø®Ù„ÙÙŠØ©
    window.addEventListener('load', function () {
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 1s ease-in';
        document.body.style.opacity = '1';
      }, 100);

      initParticles();
    });

    function initParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 15;
      for (let i = 0; i < particleCount; i++) createParticle(particlesContainer);
    }
    function createParticle(container) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 6 + 's';
      particle.style.animationDuration = (Math.random() * 3 + 4) + 's';
      container.appendChild(particle);
      setTimeout(() => { if (particle.parentNode) { particle.remove(); createParticle(container); } }, 8000);
    }
  </script>
</body>
</html>
